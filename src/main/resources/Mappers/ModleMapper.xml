<!DOCTYPE mapper>
<mapper namespace="ModleMapper">
    <!--  -->
    <select id="selectCount" parameterType="string" resultType="pojo.po.Count">
        select count(userId) as number  from modle
    </select>

    <!--    int selectModleTitle 查找userId为xx的用户，模板title为xx的模板个数-->
    <select id="selectNumByTitle" parameterType="pojo.po.Modle" resultType="pojo.po.Count">
        select count(*) as number  from modle where modleTitle=#{modleTitle} and userId=#{userId}
    </select>

    <!--insertModle 生成新模板-->
    <insert id="insertModle" parameterType="pojo.po.Modle">
        insert into modle(modleTitle,modlePath,userId,modleLabel)
        values(#{modleTitle},#{modlePath},#{userId},#{modleLabel})
    </insert>

    <!--  删除模板 -->
    <delete id="deleteModleByModleId" parameterType="pojo.po.Modle">
        delete  from modle where modleId = #{modleId}
    </delete>

    <!-- 修改模板打赏量  -->
    <update id="updateCoinsByModleId">
        update modle set coins += #{coins} where modleId = #{modleId}
    </update>>

    <!--根据模板id获取模板信息-->
    <select id="selectModleById" parameterType="pojo.po.Modle" resultType="pojo.po.Modle">
        select * from modle where modleId = #{modleId}
    </select>

    <!-- 获取标签下所有模板 -->
    <select id="selectModlesByTag" parameterType="pojo.po.Modle" resultType="pojo.vo.Community">
        select modleId,modleTitle,modlePath,userId,modleLabel,coins  from modle where modleLabel = #{modleLabel} limit #{pageIndex},20
    </select>>

    <!--selectModleByModleId-->
    <select id="selectModleByModleId" parameterType="pojo.po.Modle" resultType="pojo.po.Modle">
        select modleId,modleTitle,modlePath,userId,modleLabel from modle where modleId=#{modleId}
    </select>


    <select id="selectPathTitlAndTag" parameterType="pojo.po.Modle" resultType="pojo.po.Modle">
        select modlePath,modleTitle,modleLabel from modle where modleId=#{modleId}
    </select>
    <!-- 获取所有标签 -->
    <select id="selectLables" resultType="pojo.po.Label">
        select labelId,labelName from lable
    </select>>

    <select id="selectModleId" resultType="pojo.po.Modle">
        select modleId from modle where userId=#{userId} and modleTitle=#{modleTitle}
    </select>

    <!--    selectPathByModleId-->
    <select id="selectPathByModleId" parameterType="pojo.po.Modle" resultType="pojo.po.Modle">
        select modlePath from modle where modleId=#{modleId}
    </select>


    <update id="changeModleTag" parameterType="pojo.po.Modle" >
        update  modle set modleLabel=#{modleLabel} ,modleTitle=#{modleTitle} where modleId=#{modleId}
    </update>


    <!--selectTitleByModleId-->
    <select id="selectTitleByModleId" arameterType="pojo.po.Modle"  resultType="pojo.po.Modle">
        select modleTitle from modle where modleId=#{modleId}
    </select>

    <!--  更改模板上传状态  -->
    <update id="updateModleCommon">
        update modle set common = #{common} where modleId=#{modleId}
    </update>


</mapper>