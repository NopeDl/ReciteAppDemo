<!DOCTYPE mapper>
<mapper namespace="ModleMapper">
    <!--通过userId上传文件-->
    <insert id="insertFile">
        insert into modle (fileContext,userId) values(#{fileContext},#{userId})
    </insert>

    <select id="selectCount" parameterType="string" resultType="pojo.po.Count">
        select count(userId) as number  from modle
    </select>

    <!--    int selectModleTitle 查找userId为xx的用户，模板title为xx的模板个数-->
    <select id="selectNumByTitle" parameterType="pojo.po.Modle" resultType="pojo.po.Count">
        select count(*) as number  from modle where modleTitle=#{modleTitle} and userId=#{userId}
    </select>

<!--    &lt;!&ndash;修改原来的模板&ndash;&gt;-->
<!--    <update id="updateMOdle" parameterType="pojo.po.Modle">-->
<!--        update modle set modleText=-->
<!--    </update>-->

    <!--insertModle 生成新模板-->
    <insert id="insertModle" parameterType="pojo.po.Modle">
        insert into modle(modleId,modleTitle,modlePath,userId)
        values(#{modleId},#{modleTitle},#{modlePath},#{userId})
    </insert>

    <!-- 修改模板打赏量  -->
    <update id="updateCoinsByModleId">
        update modle set coins += #{coins} where modleId = #{modleId}
    </update>>

    <!--根据模板id获取模板信息-->
    <select id="selectModleById" resultType="pojo.po.Modle">
        select * from modle where modleId = #{modleId}
    </select>

    <!-- 获取标签下所有模板 -->
    <select id="selectModlesByTag" resultType="pojo.po.Modle">
        select * from modle where modleLabel = #{modleLabel} limit #{pageIndex},20
    </select>>

<!--    <select id="slectModleByUserId" parameterType="pojo.po.Modle" >-->
<!--        select modleId from umr where userId=#{userId}-->

<!--    </select>-->

    <!--selectModleByModleId-->
    <select id="selectModleByModleId" parameterType="pojo.po.Modle" resultType="pojo.po.Umr">
        select * from modle where modleId=#{modleId}
    </select>

<!--    selectPathByModleId-->
    <select id="selectPathByModleId" parameterType="pojo.po.Modle" resultType="pojo.po.Modle">
        select modlePath from modle where modleId=#{modleId}
    </select>



</mapper>